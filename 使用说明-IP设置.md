# IP 访问控制使用说明

## 功能概述
系统支持两类 IP 控制：
1) 后台访问 IP 限制：限制哪些 IP 可访问后台管理页  
2) 文件/目录 IP 控制：限制特定文件或目录的访问 IP

## 支持的输入格式（可多行或逗号分隔）
- CIDR：`192.168.1.0/24`
- IP 范围：`192.168.1.10-192.168.1.50` 或 `192.168.1.10~192.168.1.50`
- 单个 IP：`192.168.1.100`
- 多行混合示例：
  ```
  192.168.1.0/24
  10.0.0.1-10.0.0.100
  172.16.0.50
  ```

## 后台访问 IP 限制
1. 登录后台 `admin.php`  
2. 在“后台访问 IP 限制”输入框中填写允许的 IP 段（每行一条）  
3. 点击“保存设置”  
4. 留空表示不限制

## 文件/目录 IP 控制
1. 登录后台 `admin.php`  
2. 在“文件/目录 IP 访问控制”中填写路径（相对根目录，如 `/docs` 或 `/docs/a.pdf`）  
3. 输入允许访问的 IP 段（同样支持上面的格式）  
4. 点击“保存设置”；留空表示不限制

## 超级管理修复工具
- 位置：`public/admin_fix.php`
- 功能：清除/设置后台 IP 限制，重置管理员密码
- 访问：`http://服务器IP:8080/admin_fix.php`
- 安全提示：使用后建议删除或重命名该文件

## 常见问题
- 清除限制：输入框留空并保存即可
- 误锁后台：访问 `admin_fix.php` 清除或修改 IP 限制
- 允许所有：留空即可
- 仅支持 IPv4，暂不支持 IPv6

## 依赖提醒
若启动时报缺少 `libsqlite3.dll`，请从官方 PHP 压缩包根目录复制该文件到与 `php.exe` 同级目录（通常在 `php/` 目录内）。

