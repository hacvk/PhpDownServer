本项目无法商用，仅供个人学习参考
本项目为离线可运行的局域网文件分享/下载系统（PHP + SQLite），适配 Windows Server 2012。包含前台浏览/下载、后台登录上传、IP 段访问控制、后台 IP 限制与修复工具。

## 主要功能
- 前台：文件/文件夹列表，显示大小、修改时间，点击下载；路径穿越防护。
- 后台：登录、上传、重扫目录、文件/目录 IP 白名单、后台访问 IP 白名单。
- 修复工具：`public/admin_fix.php` 绕过 IP 限制，可清除后台 IP 限制、重置密码。

## 快速使用
1) 将 PHP 8.x（TS x64）解压到项目根目录的 `php/` 子目录，并确保存在：
   - `php/php.exe`
   - `php/php.ini`（本仓库已提供示例，可直接覆盖）
   - `php/php8ts.dll`
   - `php/libsqlite3.dll`（缺失此文件会导致 “libsqlite3.dll 丢失” 报错，请从官方压缩包根目录复制）
   - `php/ext/php_pdo_sqlite.dll`, `php/ext/php_sqlite3.dll`
2) 运行 `start.bat` 或 `start.ps1` 启动内置服务器（默认 8080）。
3) 浏览器访问 `http://服务器IP:8080/admin.php` 初始化根目录、管理员密码、后台 IP 白名单。
4) 前台访问 `http://服务器IP:8080/` 浏览下载。

## IP 输入格式
支持以下格式（每行一条，或用逗号分隔）：
- CIDR：`192.168.1.0/24`
- IP 范围：`192.168.1.10-192.168.1.50` 或 `192.168.1.10~192.168.1.50`
- 单个 IP：`192.168.1.100`

## 重要说明
- 若启动时报 “缺少 libsqlite3.dll”，请从官方 PHP 压缩包根目录复制 `libsqlite3.dll` 到 `php/`（与 `php.exe` 同级）。
- 若误设置后台 IP 导致无法访问，请访问 `http://服务器IP:8080/admin_fix.php` 修复或删除该文件。



